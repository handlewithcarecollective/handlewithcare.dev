<!DOCTYPE html><html lang="en" class="__variable_7b86c4 __variable_77d639"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/3f80fb5b8a961b37-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/4194ff78c86ec09e-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/5967addf06441df1-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/c5f088202518dbcb-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/ef8ad30213f2fe2d-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/b1c9ccced17c50c1.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-c3f605b33c1e46b5.js"/><script src="/_next/static/chunks/4bd1b696-f4e8f00606341cfe.js" async=""></script><script src="/_next/static/chunks/684-f963b0cdd375e38c.js" async=""></script><script src="/_next/static/chunks/main-app-6a97990a4d9e628d.js" async=""></script><script src="/_next/static/chunks/app/layout-8e1a52322c93b12d.js" async=""></script><script src="/_next/static/chunks/70e0d97a-086d96b41719c6c0.js" async=""></script><script src="/_next/static/chunks/305-3e51ee06ae9d8857.js" async=""></script><script src="/_next/static/chunks/874-f64ca0b2b84331a6.js" async=""></script><script src="/_next/static/chunks/344-f346a341abf28c75.js" async=""></script><script src="/_next/static/chunks/app/blog/page-d97a86ab759a4ee8.js" async=""></script><link rel="preload" href="/tracking.js" as="script"/><meta name="next-size-adjust" content=""/><title>There’s no such thing as an isomorphic layout effect</title><meta name="description" content="There’s something off about the most popular approach to quieting React’s warnings about using layout effects during server-side rendering. Let’s break down why the warning exists, and when it really makes sense to disable it without actually addressing it."/><link rel="canonical" href="https://smoores.dev/post/no_such_thing_isomorphic_layout_effect/"/><meta property="og:title" content="There’s no such thing as an isomorphic layout effect"/><meta property="og:description" content="There’s something off about the most popular approach to quieting React’s warnings about using layout effects during server-side rendering. Let’s break down why the warning exists, and when it really makes sense to disable it without actually addressing it."/><meta property="og:url" content="https://handlewithcare.dev/"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="There’s no such thing as an isomorphic layout effect"/><meta name="twitter:description" content="There’s something off about the most popular approach to quieting React’s warnings about using layout effects during server-side rendering. Let’s break down why the warning exists, and when it really makes sense to disable it without actually addressing it."/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="font-body text-brown bg-canvas h-full antialiased"><div hidden=""><!--$--><!--/$--></div><div class="border-x-blueprint m-2 h-full px-3 md:m-8 md:px-10"><header class="py-8"><h1 class="font-headings text-[1.825rem] leading-[0.9] font-extralight uppercase md:text-[2.825rem]"><a href="/">Handle <br/>with Care</a></h1></header><main class="mx-auto mt-20 flex max-w-prose flex-col gap-4"><header class="flex flex-col gap-8"><a class="font-bold underline" href="/blog">Back to all writing</a><p>Feb. 22, 2025</p><h2 class="font-headings text-center text-2xl leading-[1] font-extralight uppercase md:text-4xl">There’s no such thing as an isomorphic layout effect</h2><p class="text-base font-bold md:text-xl">by <!-- -->Shane Friedman</p><p>Originally published to<!-- --> <a class="font-bold underline" href="https://smoores.dev/post/no_such_thing_isomorphic_layout_effect/">smoores.dev</a></p></header><section id="intro" class="flex flex-col gap-4 text-base md:text-xl"><p>So, recently,
<a class="font-bold underline" href="https://github.com/handlewithcarecollective/react-prosemirror">React ProseMirror</a>
added support for server-side rendering. If you read <a class="font-bold underline" href="/blog/why_i_rebuilt_prosemirror_view">my post about how React ProseMirror works</a>, you may already know that React ProseMirror relies fairly heavily on
React’s <code><span style="color:#24292F">useLayoutEffect</span></code> hook for reading data
from the DOM after render. And if you’re familiar with server-side
rendering, you may be familiar with what happens when you render a
component that uses <code><span style="color:#24292F">useLayoutEffect</span></code> on the
server:</p><div data-bright-theme="dracula" class="text-sm md:text-base" style="color:#F8F8F2;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#44475A;--line-number-color:#6272A4;--tab-border:#191A21;--tab-background:#282A36;--tab-color:#F8F8F2;--inactive-tab-background:#21222C;--inactive-tab-color:#6272A4;--tab-top-border:#FF79C680;--tab-bottom-border:#282A36;color-scheme:dark"><style>
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  
  </style><pre style="margin:0;color:#F8F8F2;background:#282A36;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span>Warning: useLayoutEffect does nothing on the server, because its effect</span><br/></span></div><div style="padding:0 1em"><span><span>cannot be encoded into the server renderer&#x27;s output format. This will</span><br/></span></div><div style="padding:0 1em"><span><span>lead to a mismatch between the initial, non-hydrated UI and the intended</span><br/></span></div><div style="padding:0 1em"><span><span>UI. To avoid this, useLayoutEffect should only be used in components</span><br/></span></div><div style="padding:0 1em"><span><span>that render exclusively on the client. See</span><br/></span></div><div style="padding:0 1em"><span><span>https://reactjs.org/link/uselayouteffect-ssr for common fixes.</span><br/></span></div></code></pre></div></section><section id="breakdown" class="flex flex-col gap-4 text-base md:text-xl"><p><span class="decoration-green text-lg font-bold underline underline-offset-8 md:text-2xl">It’s worth</span> breaking down what this warning is actually trying
to communicate, because it’s not especially straightforward. To start, we should
review what <code><span style="color:#24292F">useLayoutEffect</span></code> is actually for. Like other React hooks,
<code><span style="color:#24292F">useLayoutEffect</span></code> provides a mechanism for managing side effects. In
particular, as the name implies, layout effects are meant to be side effects
that read from the DOM, usually for the purpose of modifying the layout of a
component. To allow this, React will execute a component’s render function,
commit the changes to the DOM, and then immediately run its layout effects
<em>before</em> the browser paints those DOM updates. This means that something like a
tooltip component can evaluate the position of its anchor in a layout effect,
update its state to reflect that position, and be re-rendered with that new
state, all without the user ever seeing the tooltip in the wrong place.</p><p>Now let’s walk through what happens when we server-side render a
component like this. Below, we have an example application that uses a
layout effect to position a tooltip:</p><div data-bright-theme="dracula" class="text-sm md:text-base" style="color:#F8F8F2;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#44475A;--line-number-color:#6272A4;--tab-border:#191A21;--tab-background:#282A36;--tab-color:#F8F8F2;--inactive-tab-background:#21222C;--inactive-tab-color:#6272A4;--tab-top-border:#FF79C680;--tab-bottom-border:#282A36;color-scheme:dark"><style>
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  
  </style><div style="background:#191A21;color:#F8F8F2;position:relative;display:flex"><div data-bright-tab="App.tsx" style="cursor:pointer;background:var(--tab-background);color:var(--tab-color);display:inline-block;padding:0.5em 1em;position:relative;font-family:Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif;font-size:13px;border-right:1px solid var(--tab-border)">App.tsx<div style="position:absolute;left:0;top:0;height:1px;z-index:10;background:var(--tab-top-border);width:100%"></div><div style="position:absolute;bottom:0;left:0;height:1px;z-index:10;background:var(--tab-bottom-border);width:100%"></div></div><div style="position:absolute;bottom:0;left:0;width:100%;pointer-events:none;background:#191A21;height:1px;z-index:9"></div></div><pre style="margin:0;color:#F8F8F2;background:#282A36;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { useLayoutEffect } </span><span style="color:#FF79C6">from </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">react</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">export function </span><span style="color:#50FA7B">App</span><span style="color:#F8F8F2">() {</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> [tooltipTop, setTooltipTop] </span><span style="color:#FF79C6">= </span><span style="color:#50FA7B">useState</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">);</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> [tooltipLeft, setTooltipLeft] </span><span style="color:#FF79C6">= </span><span style="color:#50FA7B">useState</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">);</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> anchorRef </span><span style="color:#FF79C6">= </span><span style="color:#50FA7B">useRef</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FFB86C;font-style:italic">HTMLDivElement </span><span style="color:#FF79C6">| </span><span style="color:#8BE9FD;font-style:italic">null</span><span style="color:#F8F8F2">&gt;(</span><span style="color:#BD93F9">null</span><span style="color:#F8F8F2">);</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#50FA7B">  useLayoutEffect</span><span style="color:#F8F8F2">(() </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">anchorRef.current) </span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2">;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">    const</span><span style="color:#F8F8F2"> rect </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> anchorRef.current.</span><span style="color:#50FA7B">getBoundingClientRect</span><span style="color:#F8F8F2">();</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#50FA7B">    setTooltipTop</span><span style="color:#F8F8F2">(rect.top);</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#50FA7B">    setTooltipLeft</span><span style="color:#F8F8F2">(rect.left);</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">  }, []);</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> (</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">    &lt;</span><span style="color:#FF79C6">article</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">      &lt;</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;Positioned Tooltip Demo&lt;/</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">      &lt;</span><span style="color:#FF79C6">div </span><span style="color:#50FA7B;font-style:italic">ref</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{anchorRef} /&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">      &lt;</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;A tooltip should be positioned above this paragraph.&lt;/</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">      &lt;</span><span style="color:#FF79C6">div </span><span style="color:#50FA7B;font-style:italic">style</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{{ position</span><span style="color:#FF79C6">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">absolute</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, top, left }}&gt;This is the tooltip&lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">    &lt;/</span><span style="color:#FF79C6">article</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">  );</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">}</span><br/></span></div></code></pre></div><p>Because we’re using a layout effect, this component will actually be
rendered twice on mount, with both renders occurring before the DOM
has even been painted once. The result is that the tooltip will be
correctly positioned on the very first paint, with the user only ever
visually seeing a DOM represented by the following HTML:</p><div data-bright-theme="dracula" class="text-sm md:text-base" style="color:#F8F8F2;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#44475A;--line-number-color:#6272A4;--tab-border:#191A21;--tab-background:#282A36;--tab-color:#F8F8F2;--inactive-tab-background:#21222C;--inactive-tab-color:#6272A4;--tab-top-border:#FF79C680;--tab-bottom-border:#282A36;color-scheme:dark"><style>
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  
  </style><div style="background:#191A21;color:#F8F8F2;position:relative;display:flex"><div data-bright-tab="client.html" style="cursor:pointer;background:var(--tab-background);color:var(--tab-color);display:inline-block;padding:0.5em 1em;position:relative;font-family:Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif;font-size:13px;border-right:1px solid var(--tab-border)">client.html<div style="position:absolute;left:0;top:0;height:1px;z-index:10;background:var(--tab-top-border);width:100%"></div><div style="position:absolute;bottom:0;left:0;height:1px;z-index:10;background:var(--tab-bottom-border);width:100%"></div></div><div style="position:absolute;bottom:0;left:0;width:100%;pointer-events:none;background:#191A21;height:1px;z-index:9"></div></div><pre style="margin:0;color:#F8F8F2;background:#282A36;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span style="color:#F8F8F2">&lt;</span><span style="color:#FF79C6">article</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">  &lt;</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;Positioned Tooltip Demo&lt;/</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">  &lt;</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;&lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">  &lt;</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;A tooltip should be positioned above this paragraph.&lt;/</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">  &lt;</span><span style="color:#FF79C6">div </span><span style="color:#50FA7B;font-style:italic">style</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">position: absolute; top: 50px; left: 8px;</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">&gt;&lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">&lt;/</span><span style="color:#FF79C6">article</span><span style="color:#F8F8F2">&gt;</span><br/></span></div></code></pre></div><p>But what happens when we render this component on the server? There is
no DOM on the server at all, so React never executes layout effects.
Instead, the component is rendered exactly once, using the default
values for our state:</p><div data-bright-theme="dracula" class="text-sm md:text-base" style="color:#F8F8F2;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#44475A;--line-number-color:#6272A4;--tab-border:#191A21;--tab-background:#282A36;--tab-color:#F8F8F2;--inactive-tab-background:#21222C;--inactive-tab-color:#6272A4;--tab-top-border:#FF79C680;--tab-bottom-border:#282A36;color-scheme:dark"><style>
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  
  </style><div style="background:#191A21;color:#F8F8F2;position:relative;display:flex"><div data-bright-tab="server.html" style="cursor:pointer;background:var(--tab-background);color:var(--tab-color);display:inline-block;padding:0.5em 1em;position:relative;font-family:Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif;font-size:13px;border-right:1px solid var(--tab-border)">server.html<div style="position:absolute;left:0;top:0;height:1px;z-index:10;background:var(--tab-top-border);width:100%"></div><div style="position:absolute;bottom:0;left:0;height:1px;z-index:10;background:var(--tab-bottom-border);width:100%"></div></div><div style="position:absolute;bottom:0;left:0;width:100%;pointer-events:none;background:#191A21;height:1px;z-index:9"></div></div><pre style="margin:0;color:#F8F8F2;background:#282A36;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span style="color:#F8F8F2">&lt;</span><span style="color:#FF79C6">article</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">  &lt;</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;Positioned Tooltip Demo&lt;/</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">  &lt;</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;&lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">  &lt;</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;A tooltip should be positioned above this paragraph.&lt;/</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#6272A4">  &lt;!-- focus(1:1) --&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">  &lt;</span><span style="color:#FF79C6">div </span><span style="color:#50FA7B;font-style:italic">style</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">position: absolute; top: 0; left: 0;</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">&gt;&lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">&lt;/</span><span style="color:#FF79C6">article</span><span style="color:#F8F8F2">&gt;</span><br/></span></div></code></pre></div><p>This means that in a server-side rendered context, until the
client-side JavaScript bundle is loaded, parsed, and executed, the
user will be looking at <em>the wrong UI</em>. The tooltip will simply
be in the wrong place (at <code><span style="color:#0550AE">0</span><span style="color:#24292F">,</span> <span style="color:#0550AE">0</span></code>). It will look
broken!</p><p>This is precisely the issue that React was trying to warn us about.
Because effect hooks don’t execute on the server at all, server-side
rendered UIs that rely on them may appear broken until they’re
hydrated on the client. Following the link from the warning message
takes us to a GitHub Gist with two proposed solutions: replacing the <code><span style="color:#24292F">useLayoutEffect</span></code> with a
<code><span style="color:#24292F">useEffect</span></code>, and conditionally rendering the component
that uses <code><span style="color:#24292F">useLayoutEffect</span></code> only on the client. For our
tooltip example, we should use the second option — it’s better to simply not
render the tooltip at all until the client-side JavaScript has a chance to run
and determine where it should be positioned.</p></section><section id="isomorphic-layout-effect" class="flex flex-col gap-4 text-base md:text-xl"><p><span class="decoration-green text-lg font-bold underline underline-offset-8 md:text-2xl">Not all layout effects</span> actually need to <em>modify</em> the layout,
though. React ProseMirror, for example, uses layout effects internally to
maintain ProseMirror’s view descriptor tree, which is roughly analogous to
React’s virtual DOM. Because this requires <em>reading</em> from the DOM, but not
modifying it, it’s actually safe to include in a server-side rendered component.
But it’s a huge pain to fill up users’ server logs with warnings about
<code><span style="color:#24292F">useLayoutEffect</span></code> that they can’t (and don’t need to) do anything about!</p><p>If you’ve been around the server-side rendering block once or twice,
you can probably see where this is going. The
use-isomorphic-layout-effect library, or other implementations of it
available from other popular libraries, is often the first tool that
developers reach for when they encounter this warning. Let’s take a
look at its implementation:</p><div data-bright-theme="dracula" class="text-sm md:text-base" style="color:#F8F8F2;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#44475A;--line-number-color:#6272A4;--tab-border:#191A21;--tab-background:#282A36;--tab-color:#F8F8F2;--inactive-tab-background:#21222C;--inactive-tab-color:#6272A4;--tab-top-border:#FF79C680;--tab-bottom-border:#282A36;color-scheme:dark"><style>
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  
  </style><div style="background:#191A21;color:#F8F8F2;position:relative;display:flex"><div data-bright-tab="use-isomorphic-layout-effect/src/index.ts" style="cursor:pointer;background:var(--tab-background);color:var(--tab-color);display:inline-block;padding:0.5em 1em;position:relative;font-family:Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif;font-size:13px;border-right:1px solid var(--tab-border)">use-isomorphic-layout-effect/src/index.ts<div style="position:absolute;left:0;top:0;height:1px;z-index:10;background:var(--tab-top-border);width:100%"></div><div style="position:absolute;bottom:0;left:0;height:1px;z-index:10;background:var(--tab-bottom-border);width:100%"></div></div><div style="position:absolute;bottom:0;left:0;width:100%;pointer-events:none;background:#191A21;height:1px;z-index:9"></div></div><pre style="margin:0;color:#F8F8F2;background:#282A36;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { useEffect, useLayoutEffect } </span><span style="color:#FF79C6">from </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">react</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> isClient </span><span style="color:#FF79C6">from </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">#is-client</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">export default</span><span style="color:#F8F8F2"> isClient </span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> useLayoutEffect </span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> useEffect;</span><br/></span></div></code></pre></div><p>Very simple! The library only runs
<code><span style="color:#24292F">useLayoutEffect</span></code> if the code is running on the
client (in the browser, this determined via
_<code>typeof document !== &quot;undefined&quot;</code>).
On the server, instead, it runs… _<code>useEffect</code>,
instead? That’s sort of odd. Effects never execute on the server — why
would we bother running <code><span style="color:#24292F">useEffect</span></code> there?</p><p>And it’s not just this library that’s made this somewhat odd choice of
no-op. Here’s react-use’s implementation:</p><div data-bright-theme="dracula" class="text-sm md:text-base" style="color:#F8F8F2;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#44475A;--line-number-color:#6272A4;--tab-border:#191A21;--tab-background:#282A36;--tab-color:#F8F8F2;--inactive-tab-background:#21222C;--inactive-tab-color:#6272A4;--tab-top-border:#FF79C680;--tab-bottom-border:#282A36;color-scheme:dark"><style>
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  
  </style><div style="background:#191A21;color:#F8F8F2;position:relative;display:flex"><div data-bright-tab="react-use" style="cursor:pointer;background:var(--tab-background);color:var(--tab-color);display:inline-block;padding:0.5em 1em;position:relative;font-family:Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif;font-size:13px;border-right:1px solid var(--tab-border)">react-use<div style="position:absolute;left:0;top:0;height:1px;z-index:10;background:var(--tab-top-border);width:100%"></div><div style="position:absolute;bottom:0;left:0;height:1px;z-index:10;background:var(--tab-bottom-border);width:100%"></div></div><div style="position:absolute;bottom:0;left:0;width:100%;pointer-events:none;background:#191A21;height:1px;z-index:9"></div></div><pre style="margin:0;color:#F8F8F2;background:#282A36;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> useIsomorphicLayoutEffect </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> isBrowser </span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> useLayoutEffect </span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> useEffect;</span><br/></span></div></code></pre></div><p>The Mantine design system:</p><div data-bright-theme="dracula" class="text-sm md:text-base" style="color:#F8F8F2;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#44475A;--line-number-color:#6272A4;--tab-border:#191A21;--tab-background:#282A36;--tab-color:#F8F8F2;--inactive-tab-background:#21222C;--inactive-tab-color:#6272A4;--tab-top-border:#FF79C680;--tab-bottom-border:#282A36;color-scheme:dark"><style>
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  
  </style><div style="background:#191A21;color:#F8F8F2;position:relative;display:flex"><div data-bright-tab="mantine" style="cursor:pointer;background:var(--tab-background);color:var(--tab-color);display:inline-block;padding:0.5em 1em;position:relative;font-family:Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif;font-size:13px;border-right:1px solid var(--tab-border)">mantine<div style="position:absolute;left:0;top:0;height:1px;z-index:10;background:var(--tab-top-border);width:100%"></div><div style="position:absolute;bottom:0;left:0;height:1px;z-index:10;background:var(--tab-bottom-border);width:100%"></div></div><div style="position:absolute;bottom:0;left:0;width:100%;pointer-events:none;background:#191A21;height:1px;z-index:9"></div></div><pre style="margin:0;color:#F8F8F2;background:#282A36;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span style="color:#FF79C6">export const</span><span style="color:#F8F8F2"> useIsomorphicEffect </span><span style="color:#FF79C6">=</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">  typeof</span><span style="color:#F8F8F2"> document </span><span style="color:#FF79C6">!== </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">undefined</span><span style="color:#E9F284">&quot; </span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> useLayoutEffect </span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> useEffect;</span><br/></span></div></code></pre></div><p>React Beautiful DnD:</p><div data-bright-theme="dracula" class="text-sm md:text-base" style="color:#F8F8F2;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#44475A;--line-number-color:#6272A4;--tab-border:#191A21;--tab-background:#282A36;--tab-color:#F8F8F2;--inactive-tab-background:#21222C;--inactive-tab-color:#6272A4;--tab-top-border:#FF79C680;--tab-bottom-border:#282A36;color-scheme:dark"><style>
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  
  </style><div style="background:#191A21;color:#F8F8F2;position:relative;display:flex"><div data-bright-tab="react-beautiful-dnd" style="cursor:pointer;background:var(--tab-background);color:var(--tab-color);display:inline-block;padding:0.5em 1em;position:relative;font-family:Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif;font-size:13px;border-right:1px solid var(--tab-border)">react-beautiful-dnd<div style="position:absolute;left:0;top:0;height:1px;z-index:10;background:var(--tab-top-border);width:100%"></div><div style="position:absolute;bottom:0;left:0;height:1px;z-index:10;background:var(--tab-bottom-border);width:100%"></div></div><div style="position:absolute;bottom:0;left:0;width:100%;pointer-events:none;background:#191A21;height:1px;z-index:9"></div></div><pre style="margin:0;color:#F8F8F2;background:#282A36;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> useIsomorphicLayoutEffect </span><span style="color:#FF79C6">=</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">  typeof</span><span style="color:#F8F8F2"> window </span><span style="color:#FF79C6">!== </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">undefined</span><span style="color:#E9F284">&quot; </span><span style="color:#FF79C6">&amp;&amp;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">  typeof</span><span style="color:#F8F8F2"> window.document </span><span style="color:#FF79C6">!== </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">undefined</span><span style="color:#E9F284">&quot; </span><span style="color:#FF79C6">&amp;&amp;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">  typeof</span><span style="color:#F8F8F2"> window.document.createElement </span><span style="color:#FF79C6">!== </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">undefined</span><span style="color:#E9F284">&quot;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">    ?</span><span style="color:#F8F8F2"> useLayoutEffect</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">    :</span><span style="color:#F8F8F2"> useEffect;</span><br/></span></div></code></pre></div><p>In case it’s not clear why I’m so fascinated by this choice, here’s
React ProseMirror’s implementation:</p><div data-bright-theme="dracula" class="text-sm md:text-base" style="color:#F8F8F2;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#44475A;--line-number-color:#6272A4;--tab-border:#191A21;--tab-background:#282A36;--tab-color:#F8F8F2;--inactive-tab-background:#21222C;--inactive-tab-color:#6272A4;--tab-top-border:#FF79C680;--tab-bottom-border:#282A36;color-scheme:dark"><style>
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  
  </style><div style="background:#191A21;color:#F8F8F2;position:relative;display:flex"><div data-bright-tab="useClientLayoutEffect.ts&quot;" style="cursor:pointer;background:var(--tab-background);color:var(--tab-color);display:inline-block;padding:0.5em 1em;position:relative;font-family:Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif;font-size:13px;border-right:1px solid var(--tab-border)">useClientLayoutEffect.ts&quot;<div style="position:absolute;left:0;top:0;height:1px;z-index:10;background:var(--tab-top-border);width:100%"></div><div style="position:absolute;bottom:0;left:0;height:1px;z-index:10;background:var(--tab-bottom-border);width:100%"></div></div><div style="position:absolute;bottom:0;left:0;width:100%;pointer-events:none;background:#191A21;height:1px;z-index:9"></div></div><pre style="margin:0;color:#F8F8F2;background:#282A36;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { useLayoutEffect } </span><span style="color:#FF79C6">from </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">react</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">export function </span><span style="color:#50FA7B">useClientLayoutEffect</span><span style="color:#F8F8F2">(</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">  ...</span><span style="color:#FFB86C;font-style:italic">args</span><span style="color:#FF79C6">: </span><span style="color:#8BE9FD;font-style:italic">Parameters</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FF79C6">typeof</span><span style="color:#F8F8F2"> useLayoutEffect&gt;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">) {</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">  if</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">typeof</span><span style="color:#F8F8F2"> document </span><span style="color:#FF79C6">=== </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">undefined</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2">;</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#50FA7B">  useLayoutEffect</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">...</span><span style="color:#F8F8F2">args);</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2">}</span><br/></span></div></code></pre></div><p>This implementation has <em>precisely</em> the same behavior as the
implementations above. On the client, it calls
<code><span style="color:#24292F">useLayoutEffect</span></code>, and on the server, it does
nothing. I didn’t name it “isomorphic”, because it’s not really
isomorphic — at least in the sense of “Isomorphic JavaScript”, which
describes JavaScript code that runs on both the client and the server
— as it doesn’t run on the server at all!</p></section><section id="conclusion" class="flex flex-col gap-4 text-base md:text-xl"><p><span class="decoration-green text-lg font-bold underline underline-offset-8 md:text-2xl">Just to be clear</span>, this doesn’t <em>really</em> matter. I’m not arguing
that no one should ever use use-isomorphic-layout-effect, or that all of these
libraries need to change their implementations of this function to use an
explicit no-op instead of <code><span style="color:#24292F">useEffect</span></code> on the server. I <em>am</em>, however, curious
about where this surprisingly ubiquitous quirk of the React ecosystem came from.
And I have a hypothesis.</p><p>In February of 2019, the React team released React 16.8, the first
stable release of React that included hooks. Two months later, React
Redux released their v7, which included a new hooks-based integration
between React and Redux.
<a class="font-bold underline" href="https://github.com/reduxjs/react-redux/commit/96fec159e2afb8649321d8cd61841b9cf406ae8f#diff-9f098d970b2879a8b6675a3aea9ece3ea36c2c0d1bdfb7008f2739cda236b839R35-R281">And wouldn’t you know it</a>:</p><div data-bright-theme="dracula" class="text-sm md:text-base" style="color:#F8F8F2;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#44475A;--line-number-color:#6272A4;--tab-border:#191A21;--tab-background:#282A36;--tab-color:#F8F8F2;--inactive-tab-background:#21222C;--inactive-tab-color:#6272A4;--tab-top-border:#FF79C680;--tab-bottom-border:#282A36;color-scheme:dark"><style>
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  
  </style><div style="background:#191A21;color:#F8F8F2;position:relative;display:flex"><div data-bright-tab="connectAdvanced.js&quot;" style="cursor:pointer;background:var(--tab-background);color:var(--tab-color);display:inline-block;padding:0.5em 1em;position:relative;font-family:Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif;font-size:13px;border-right:1px solid var(--tab-border)">connectAdvanced.js&quot;<div style="position:absolute;left:0;top:0;height:1px;z-index:10;background:var(--tab-top-border);width:100%"></div><div style="position:absolute;bottom:0;left:0;height:1px;z-index:10;background:var(--tab-bottom-border);width:100%"></div></div><div style="position:absolute;bottom:0;left:0;width:100%;pointer-events:none;background:#191A21;height:1px;z-index:9"></div></div><pre style="margin:0;color:#F8F8F2;background:#282A36;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span style="color:#6272A4">// React currently throws a warning when using useLayoutEffect on the server.</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#6272A4">// To get around it, we can conditionally useEffect on the server (no-op) and</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#6272A4">// useLayoutEffect in the browser. We need useLayoutEffect because we want</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#6272A4">// \`connect\`_ to perform sync updates to a ref to save the latest props after</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#6272A4">// a render is actually committed to the DOM.</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> useIsomorphicLayoutEffect </span><span style="color:#FF79C6">=</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">typeof</span><span style="color:#F8F8F2"> window </span><span style="color:#FF79C6">!== </span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">undefined</span><span style="color:#E9F284">&#x27; </span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> useLayoutEffect </span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> useEffect</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#FF79C6">...</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#F8F8F2"></span><br/></span></div><div style="padding:0 1em"><span><span style="color:#6272A4">// We need this to execute synchronously every time we re-render. However, React warns</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#6272A4">// about useLayoutEffect in SSR, so we try to detect environment and fall back to</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#6272A4">// just useEffect instead to avoid the warning, since neither will run anyway.</span><br/></span></div><div style="padding:0 1em"><span><span style="color:#50FA7B">useIsomorphicLayoutEffect</span><span style="color:#F8F8F2">(() </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span><br/></span></div></code></pre></div><p>Make sure to read those comments — the React Redux team seems fully
aware that <code><span style="color:#24292F">useEffect</span></code> is a mere no-op here.
React Beautiful DnD’s implementation actually directly references this
React Redux code. Other implementations likely either copied from one
of these two popular libraries, or from
<a class="font-bold underline" href="https://medium.com/@alexandereardon/uselayouteffect-and-ssr-192986cdcf7a">this Medium post from a few weeks later</a>.</p><p>From what I can tell, a very popular, well maintained library made an
early, arbitrary implementation decision. Because copying this library
felt like a safe bet to other library maintainers, this arbitrary
decision became the de facto implementation for this workaround. A
Medium post about this implementation became so widely read that it’s
still the number one Google result for the query “useLayoutEffect ssr
warning”, several slots above the GitHub Gist discussing the correct
solution for most use cases.</p></section><section id="why-it-matters" class="flex flex-col gap-4 text-base md:text-xl"><p><span class="decoration-green text-lg font-bold underline underline-offset-8 md:text-2xl">Even though I had an explanation</span>, this kept itching at me. This
is partly due to the description of the use-isomorphic-layout-effect library,
which reads:</p><blockquote class="mx-10 my-5">
<p>A React helper hook for scheduling a layout effect with a fallback
to a regular effect for environments where layout effects should not
be used (such as server-side rendering).</p>
</blockquote><p>There is no mention here that <code><span style="color:#24292F">useEffect</span></code> is a
mere no-op in those situations. It also seems to describe the problem
space somewhat incorrectly — if a given layout effect actually should
not be used in server-side rendering, then the component using it
almost certainly should not be server-side rendered at all. Falling
back to a plain effect in that situation is precisely as incorrect as
using a layout effect — only without a warning to guide you toward the
correct solution.</p><p>react-use’s <code><span style="color:#24292F">useIsomorphicLayoutEffect</span></code> hook
has a somewhat more accurate description:</p><blockquote class="mx-10 my-5">
<p><code><span style="color:#24292F">useLayoutEffect</span></code> that does not show warning
when server-side rendering, see
<a class="font-bold underline" href="https://medium.com/@alexandereardon/uselayouteffect-and-ssr-192986cdcf7a">Alex Reardon’s article</a>
for more info.</p>
</blockquote><p>But it also lacks any detail about when it’s appropriate to use this
hook in place of <code><span style="color:#24292F">useLayoutEffect</span></code>. And, worse,
on the main README for react-use, the description for the hook reads:</p><blockquote class="mx-10 my-5">
<p><code><span style="color:#24292F">useLayoutEffect</span></code> that that [sic] works on
server.</p>
</blockquote><p>Which is not correct. This hook, like all other “isomorphic” layout
effect hooks, has exactly the same behavior as
<code><span style="color:#24292F">useLayoutEffect</span></code>, minus the warning. It does
not work on the server!</p></section><section id="takeaways" class="flex flex-col gap-4 text-base md:text-xl"><p><span class="decoration-green text-lg font-bold underline underline-offset-8 md:text-2xl">I may be reading far too much into this very scant story</span>, but I
began to see a narrative unfold the further I looked into this:</p><p>A maintainer for a very popular open source library, in the midst of a
big refactor, made an essentially arbitrary decision to work around a
noisy warning that wasn’t relevant to their use case. They seem to
have done this with full knowledge that their decision was arbitrary,
and left a comment explaining it.</p><p>Another maintainer for a similarly popular open source library also
needed to work around the warning, which was similarly irrelevant to
their use case. They saw this workaround and decided to copy it as-is,
leaving only link to the original (which has since been replaced) as
explanation.</p><p>A developer, frustrated by the warning, found these libraries’
workaround and authored a short blog post touting it as a way to quiet
the warning. They seem to at least somewhat misunderstand the purpose
of the warning (or maybe they fully understand it, but didn’t fully
explain), and don’t clarify in their post that the choice of
<code><span style="color:#24292F">useEffect</span></code> is essentially arbitrary.</p><p>As more developers migrated to use React hooks, more developers ran
into this warning and began searching for solutions. Some of them
published the solution from Reardon’s blog post in their own
libraries, and others found Reardon’s post and implemented his
approach themselves.</p><p>At each step in the saga, there’s less and less context. Even though
the warning itself links to a GitHub Gist that explains the issue and
solutions quite well, searching the language of the warning will
retrieve Reardon’s post and other solutions before the linked Gist
from the React team.</p><p>As a result, the de facto solution to this “problem” doesn’t have
sufficient context for users to understand how to use it effectively.
The hugely popular
<a class="font-bold underline" href="https://www.npmjs.com/package/react-select">React-Select library</a>, for example,
<a class="font-bold underline" href="https://github.com/JedWatson/react-select/blob/53b85346bb7defd937257b0daf9d6993ef20a59a/packages/react-select/src/components/Menu.tsx#L335-L364">incorrectly uses use-isomorphic-layout-effect</a>
to position and scroll a menu, when it should instead avoid rendering
the menu on the server at all. And I’m not trying to pick on
React-Select — it seems likely that this is almost never an actual bug
for them, since menus are likely always collapsed during the server
render. But that is precisely the use case that the React team had in
mind when they added the <code><span style="color:#24292F">useLayoutEffect</span></code>
warning!</p><p>To me at least, this is a reminder of why it’s important to understand
<em>why</em> our code does what it does. It can be tempting to sit
back and let sleeping dogs lie after finally finding the solution to a
confounding bug. But it’s all too easy for those incomplete
understandings to build up and slowly shift our intuition over time,
until we find that our mental model of our problem space doesn’t match
reality any longer.</p><p>Oh, and React ProseMirror doesn’t trigger the layout effect warning
during server-side rendering anymore!</p></section></main><!--$--><!--/$--></div><script src="/_next/static/chunks/webpack-c3f605b33c1e46b5.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7555,[],\"\"]\n3:I[1295,[],\"\"]\n4:I[9243,[\"177\",\"static/chunks/app/layout-8e1a52322c93b12d.js\"],\"\"]\n5:I[6874,[\"4\",\"static/chunks/70e0d97a-086d96b41719c6c0.js\",\"305\",\"static/chunks/305-3e51ee06ae9d8857.js\",\"874\",\"static/chunks/874-f64ca0b2b84331a6.js\",\"344\",\"static/chunks/344-f346a341abf28c75.js\",\"831\",\"static/chunks/app/blog/page-d97a86ab759a4ee8.js\"],\"\"]\n7:I[9665,[],\"OutletBoundary\"]\na:I[4911,[],\"AsyncMetadataOutlet\"]\nc:I[9665,[],\"ViewportBoundary\"]\ne:I[9665,[],\"MetadataBoundary\"]\n10:I[6614,[],\"\"]\n:HL[\"/_next/static/media/3f80fb5b8a961b37-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/4194ff78c86ec09e-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/5967addf06441df1-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/c5f088202518dbcb-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/ef8ad30213f2fe2d-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/b1c9ccced17c50c1.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"L7DeLiWYBqMW2TjiwFCDk\",\"p\":\"\",\"c\":[\"\",\"blog\",\"no_such_thing_isomorphic_layout_effect\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"no_such_thing_isomorphic_layout_effect\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b1c9ccced17c50c1.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"__variable_7b86c4 __variable_77d639\",\"children\":[\"$\",\"body\",null,{\"suppressHydrationWarning\":true,\"className\":\"font-body text-brown bg-canvas h-full antialiased\",\"children\":[[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"$L4\",null,{\"src\":\"/tracking.js\"}]]}]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"div\",null,{\"className\":\"border-x-blueprint m-2 h-full px-3 md:m-8 md:px-10\",\"children\":[[\"$\",\"header\",null,{\"className\":\"py-8\",\"children\":[\"$\",\"h1\",null,{\"className\":\"font-headings text-[1.825rem] leading-[0.9] font-extralight uppercase md:text-[2.825rem]\",\"children\":[\"$\",\"$L5\",null,{\"href\":\"/\",\"children\":[\"Handle \",[\"$\",\"br\",null,{}],\"with Care\"]}]}]}],[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]]}],{\"children\":[[\"slug\",\"no_such_thing_isomorphic_layout_effect\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",null,[\"$\",\"$L7\",null,{\"children\":[\"$L8\",\"$L9\",[\"$\",\"$La\",null,{\"promise\":\"$@b\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"igIyAIBBW2GxRKFaQzlb2v\",{\"children\":[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:\"$Sreact.suspense\"\n12:I[4911,[],\"AsyncMetadata\"]\nf:[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$11\",null,{\"fallback\":null,\"children\":[\"$\",\"$L12\",null,{\"promise\":\"$@13\"}]}]}]\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"main\",null,{\"className\":\"mx-auto mt-20 flex max-w-prose flex-col gap-4\",\"children\":[[\"$\",\"header\",null,{\"className\":\"flex flex-col gap-8\",\"children\":[[\"$\",\"a\",null,{\"className\":\"font-bold underline\",\"href\":\"/blog\",\"children\":\"Back to all writing\"}],[\"$\",\"p\",null,{\"children\":\"Feb. 22, 2025\"}],[\"$\",\"h2\",null,{\"className\":\"font-headings text-center text-2xl leading-[1] font-extralight uppercase md:text-4xl\",\"children\":\"There’s no such thing as an isomorphic layout effect\"}],[\"$\",\"p\",null,{\"className\":\"text-base font-bold md:text-xl\",\"children\":[\"by \",\"Shane Friedman\"]}],[\"$\",\"p\",null,{\"children\":[\"Originally published to\",\" \",[\"$\",\"a\",null,{\"className\":\"font-bold underline\",\"href\":\"https://smoores.dev/post/no_such_thing_isomorphic_layout_effect/\",\"children\":\"smoores.dev\"}]]}]]}],[[\"$\",\"section\",\"intro\",{\"id\":\"intro\",\"className\":\"flex flex-col gap-4 text-base md:text-xl\",\"children\":[[\"$\",\"$1\",\".0\",{\"children\":[[\"$\",\"p\",null,{\"children\":[\"So, recently,\\n\",[\"$\",\"a\",null,{\"className\":\"font-bold underline\",\"href\":\"https://github.com/handlewithcarecollective/react-prosemirror\",\"children\":\"React ProseMirror\"}],\"\\nadded support for server-side rendering. If you read \",[\"$\",\"a\",null,{\"className\":\"font-bold underline\",\"href\":\"/blog/why_i_rebuilt_prosemirror_view\",\"children\":\"my post about how React ProseMirror works\"}],\", you may already know that React ProseMirror relies fairly heavily on\\nReact’s \",\"$L14\",\" hook for reading data\\nfrom the DOM after render. And if you’re familiar with server-side\\nrendering, you may be familiar with what happens when you render a\\ncomponent that uses \",\"$L15\",\" on the\\nserver:\"]}],\"$L16\"],\"serverOnly\":\"$undefined\"}]]}],[\"$\",\"section\",\"breakdown\",{\"id\":\"breakdown\",\"className\":\"flex flex-col gap-4 text-base md:text-xl\",\"children\":[[\"$\",\"$1\",\".0\",{\"children\":[[\"$\",\"p\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"decoration-green text-lg font-bold underline underline-offset-8 md:text-2xl\",\"children\":\"It’s worth\"}],\" breaking down what this warning is actually trying\\nto communicate, because it’s not especially straightforward. To start, we should\\nreview what \",\"$L17\",\" is actually for. Like other React hooks,\\n\",\"$L18\",\" provides a mechanism for managing side effects. In\\nparticular, as the name implies, layout effects are meant to be side effects\\nthat read from the DOM, usually for the purpose of modifying the layout of a\\ncomponent. To allow this, React will execute a component’s render function,\\ncommit the changes to the DOM, and then immediately run its layout effects\\n\",[\"$\",\"em\",null,{\"children\":\"before\"}],\" the browser paints those DOM updates. This means that something like a\\ntooltip component can evaluate the position of its anchor in a layout effect,\\nupdate its state to reflect that position, and be re-rendered with that new\\nstate, all without the user ever seeing the tooltip in the wrong place.\"]}],[\"$\",\"p\",null,{\"children\":\"Now let’s walk through what happens when we server-side render a\\ncomponent like this. Below, we have an example application that uses a\\nlayout effect to position a tooltip:\"}],\"$L19\",[\"$\",\"p\",null,{\"children\":\"Because we’re using a layout effect, this component will actually be\\nrendered twice on mount, with both renders occurring before the DOM\\nhas even been painted once. The result is that the tooltip will be\\ncorrectly positioned on the very first paint, with the user only ever\\nvisually seeing a DOM represented by the following HTML:\"}],\"$L1a\",[\"$\",\"p\",null,{\"children\":\"But what happens when we render this component on the server? There is\\nno DOM on the server at all, so React never executes layout effects.\\nInstead, the component is rendered exactly once, using the default\\nvalues for our state:\"}],\"$L1b\",[\"$\",\"p\",null,{\"children\":[\"This means that in a server-side rendered context, until the\\nclient-side JavaScript bundle is loaded, parsed, and executed, the\\nuser will be looking at \",[\"$\",\"em\",null,{\"children\":\"the wrong UI\"}],\". The tooltip will simply\\nbe in the wrong place (at \",\"$L1c\",\"). It will look\\nbroken!\"]}],[\"$\",\"p\",null,{\"children\":[\"This is precisely the issue that React was trying to warn us about.\\nBecause effect hooks don’t execute on the server at all, server-side\\nrendered UIs that rely on them may appear broken until they’re\\nhydrated on the client. Following the link from the warning message\\ntakes us to a GitHub Gist with two proposed solutions: replacing the \",\"$L1d\",\" with a\\n\",\"$L1e\",\", and conditionally rendering the component\\nthat uses \",\"$L1f\",\" only on the client. For our\\ntooltip example, we should use the second option — it’s better to simply not\\nrender the tooltip at all until the client-side JavaScript has a chance to run\\nand determine where it should be positioned.\"]}]],\"serverOnly\":\"$undefined\"}]]}],[\"$\",\"section\",\"isomorphic-layout-effect\",{\"id\":\"isomorphic-layout-effect\",\"className\":\"flex flex-col gap-4 text-base md:text-xl\",\"children\":[[\"$\",\"$1\",\".0\",{\"children\":[[\"$\",\"p\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"decoration-green text-lg font-bold underline underline-offset-8 md:text-2xl\",\"children\":\"Not all layout effects\"}],\" actually need to \",[\"$\",\"em\",null,{\"children\":\"modify\"}],\" the layout,\\nthough. React ProseMirror, for example, uses layout effects internally to\\nmaintain ProseMirror’s view descriptor tree, which is roughly analogous to\\nReact’s virtual DOM. Because this requires \",[\"$\",\"em\",null,{\"children\":\"reading\"}],\" from the DOM, but not\\nmodifying it, it’s actually safe to include in a server-side rendered component.\\nBut it’s a huge pain to fill up users’ server logs with warnings about\\n\",\"$L20\",\" that they can’t (and don’t need to) do anything about!\"]}],[\"$\",\"p\",null,{\"children\":\"If you’ve been around the server-side rendering block once or twice,\\nyou can probably see where this is going. The\\nuse-isomorphic-layout-effect library, or other implementations of it\\navailable from other popular libraries, is often the first tool that\\ndevelopers reach for when they encounter this warning. Let’s take a\\nlook at its implementation:\"}],\"$L21\",[\"$\",\"p\",null,{\"children\":[\"Very simple! The library only runs\\n\",\"$L22\",\" if the code is running on the\\nclient (in the browser, this determined via\\n_\",[\"$\",\"code\",null,{\"children\":\"typeof document !== \\\"undefined\\\"\"}],\").\\nOn the server, instead, it runs… _\",[\"$\",\"code\",null,{\"children\":\"useEffect\"}],\",\\ninstead? That’s sort of odd. Effects never execute on the server — why\\nwould we bother running \",\"$L23\",\" there?\"]}],[\"$\",\"p\",null,{\"children\":\"And it’s not just this library that’s made this somewhat odd choice of\\nno-op. Here’s react-use’s implementation:\"}],\"$L24\",[\"$\",\"p\",null,{\"children\":\"The Mantine design system:\"}],\"$L25\",[\"$\",\"p\",null,{\"children\":\"React Beautiful DnD:\"}],\"$L26\",[\"$\",\"p\",null,{\"children\":\"In case it’s not clear why I’m so fascinated by this choice, here’s\\nReact ProseMirror’s implementation:\"}],\"$L27\",[\"$\",\"p\",null,{\"children\":[\"This implementation has \",[\"$\",\"em\",null,{\"children\":\"precisely\"}],\" the same behavior as the\\nimplementations above. On the client, it calls\\n\",\"$L28\",\", and on the server, it does\\nnothing. I didn’t name it “isomorphic”, because it’s not really\\nisomorphic — at least in the sense of “Isomorphic JavaScript”, which\\ndescribes JavaScript code that runs on both the client and the server\\n— as it doesn’t run on the server at all!\"]}]],\"serverOnly\":\"$undefined\"}]]}],[\"$\",\"section\",\"conclusion\",{\"id\":\"conclusion\",\"className\":\"flex flex-col gap-4 text-base md:text-xl\",\"children\":[[\"$\",\"$1\",\".0\",{\"children\":[[\"$\",\"p\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"decoration-green text-lg font-bold underline underline-offset-8 md:text-2xl\",\"children\":\"Just to be clear\"}],\", this doesn’t \",[\"$\",\"em\",null,{\"children\":\"really\"}],\" matter. I’m not arguing\\nthat no one should ever use use-isomorphic-layout-effect, or that all of these\\nlibraries need to change their implementations of this function to use an\\nexplicit no-op instead of \",\"$L29\",\" on the server. I \",[\"$\",\"em\",null,{\"children\":\"am\"}],\", however, curious\\nabout where this surprisingly ubiquitous quirk of the React ecosystem came from.\\nAnd I have a hypothesis.\"]}],[\"$\",\"p\",null,{\"children\":[\"In February of 2019, the React team released React 16.8, the first\\nstable release of React that included hooks. Two months later, React\\nRedux released their v7, which included a new hooks-based integration\\nbetween React and Redux.\\n\",[\"$\",\"a\",null,{\"className\":\"font-bold underline\",\"href\":\"https://github.com/reduxjs/react-redux/commit/96fec159e2afb8649321d8cd61841b9cf406ae8f#diff-9f098d970b2879a8b6675a3aea9ece3ea36c2c0d1bdfb7008f2739cda236b839R35-R281\",\"children\":\"And wouldn’t you know it\"}],\":\"]}],\"$L2a\",[\"$\",\"p\",null,{\"children\":[\"Make sure to read those comments — the React Redux team seems fully\\naware that \",\"$L2b\",\" is a mere no-op here.\\nReact Beautiful DnD’s implementation actually directly references this\\nReact Redux code. Other implementations likely either copied from one\\nof these two popular libraries, or from\\n\",[\"$\",\"a\",null,{\"className\":\"font-bold underline\",\"href\":\"https://medium.com/@alexandereardon/uselayouteffect-and-ssr-192986cdcf7a\",\"children\":\"this Medium post from a few weeks later\"}],\".\"]}],[\"$\",\"p\",null,{\"children\":\"From what I can tell, a very popular, well maintained library made an\\nearly, arbitrary implementation decision. Because copying this library\\nfelt like a safe bet to other library maintainers, this arbitrary\\ndecision became the de facto implementation for this workaround. A\\nMedium post about this implementation became so widely read that it’s\\nstill the number one Google result for the query “useLayoutEffect ssr\\nwarning”, several slots above the GitHub Gist discussing the correct\\nsolution for most use cases.\"}]],\"serverOnly\":\"$undefined\"}]]}],[\"$\",\"section\",\"why-it-matters\",{\"id\":\"why-it-matters\",\"className\":\"flex flex-col gap-4 text-base md:text-xl\",\"children\":[[\"$\",\"$1\",\".0\",{\"children\":[[\"$\",\"p\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"decoration-green text-lg font-bold underline underline-offset-8 md:text-2xl\",\"children\":\"Even though I had an explanation\"}],\", this kept itching at me. This\\nis partly due to the description of the use-isomorphic-layout-effect library,\\nwhich reads:\"]}],[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"A React helper hook for scheduling a layout effect with a fallback\\nto a regular effect for environments where layout effects should not\\nbe used (such as server-side rendering).\"}],\"\\n\"],\"className\":\"mx-10 my-5\"}],[\"$\",\"p\",null,{\"children\":[\"There is no mention here that \",\"$L2c\",\" is a\\nmere no-op in those situations. It also seems to describe the problem\\nspace somewhat incorrectly — if a given layout effect actually should\\nnot be used in server-side rendering, then the component using it\\nalmost certainly should not be server-side rendered at all. Falling\\nback to a plain effect in that situation is precisely as incorrect as\\nusing a layout effect — only without a warning to guide you toward the\\ncorrect solution.\"]}],[\"$\",\"p\",null,{\"children\":[\"react-use’s \",\"$L2d\",\" hook\\nhas a somewhat more accurate description:\"]}],[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$L2e\",\" that does not show warning\\nwhen server-side rendering, see\\n\",[\"$\",\"a\",null,{\"className\":\"font-bold underline\",\"href\":\"https://medium.com/@alexandereardon/uselayouteffect-and-ssr-192986cdcf7a\",\"children\":\"Alex Reardon’s article\"}],\"\\nfor more info.\"]}],\"\\n\"],\"className\":\"mx-10 my-5\"}],[\"$\",\"p\",null,{\"children\":[\"But it also lacks any detail about when it’s appropriate to use this\\nhook in place of \",\"$L2f\",\". And, worse,\\non the main README for react-use, the description for the hook reads:\"]}],[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$L30\",\" that that [sic] works on\\nserver.\"]}],\"\\n\"],\"className\":\"mx-10 my-5\"}],[\"$\",\"p\",null,{\"children\":[\"Which is not correct. This hook, like all other “isomorphic” layout\\neffect hooks, has exactly the same behavior as\\n\",\"$L31\",\", minus the warning. It does\\nnot work on the server!\"]}]],\"serverOnly\":\"$undefined\"}]]}],[\"$\",\"section\",\"takeaways\",{\"id\":\"takeaways\",\"className\":\"flex flex-col gap-4 text-base md:text-xl\",\"children\":[[\"$\",\"$1\",\".0\",{\"children\":[[\"$\",\"p\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"decoration-green text-lg font-bold underline underline-offset-8 md:text-2xl\",\"children\":\"I may be reading far too much into this very scant story\"}],\", but I\\nbegan to see a narrative unfold the further I looked into this:\"]}],[\"$\",\"p\",null,{\"children\":\"A maintainer for a very popular open source library, in the midst of a\\nbig refactor, made an essentially arbitrary decision to work around a\\nnoisy warning that wasn’t relevant to their use case. They seem to\\nhave done this with full knowledge that their decision was arbitrary,\\nand left a comment explaining it.\"}],[\"$\",\"p\",null,{\"children\":\"Another maintainer for a similarly popular open source library also\\nneeded to work around the warning, which was similarly irrelevant to\\ntheir use case. They saw this workaround and decided to copy it as-is,\\nleaving only link to the original (which has since been replaced) as\\nexplanation.\"}],[\"$\",\"p\",null,{\"children\":[\"A developer, frustrated by the warning, found these libraries’\\nworkaround and authored a short blog post touting it as a way to quiet\\nthe warning. They seem to at least somewhat misunderstand the purpose\\nof the warning (or maybe they fully understand it, but didn’t fully\\nexplain), and don’t clarify in their post that the choice of\\n\",\"$L32\",\" is essentially arbitrary.\"]}],[\"$\",\"p\",null,{\"children\":\"As more developers migrated to use React hooks, more developers ran\\ninto this warning and began searching for solutions. Some of them\\npublished the solution from Reardon’s blog post in their own\\nlibraries, and others found Reardon’s post and implemented his\\napproach themselves.\"}],[\"$\",\"p\",null,{\"children\":\"At each step in the saga, there’s less and less context. Even though\\nthe warning itself links to a GitHub Gist that explains the issue and\\nsolutions quite well, searching the language of the warning will\\nretrieve Reardon’s post and other solutions before the linked Gist\\nfrom the React team.\"}],[\"$\",\"p\",null,{\"children\":[\"As a result, the de facto solution to this “problem” doesn’t have\\nsufficient context for users to understand how to use it effectively.\\nThe hugely popular\\n\",[\"$\",\"a\",null,{\"className\":\"font-bold underline\",\"href\":\"https://www.npmjs.com/package/react-select\",\"children\":\"React-Select library\"}],\", for example,\\n\",[\"$\",\"a\",null,{\"className\":\"font-bold underline\",\"href\":\"https://github.com/JedWatson/react-select/blob/53b85346bb7defd937257b0daf9d6993ef20a59a/packages/react-select/src/components/Menu.tsx#L335-L364\",\"children\":\"incorrectly uses use-isomorphic-layout-effect\"}],\"\\nto position and scroll a menu, when it should instead avoid rendering\\nthe menu on the server at all. And I’m not trying to pick on\\nReact-Select — it seems likely that this is almost never an actual bug\\nfor them, since menus are likely always collapsed during the server\\nrender. But that is precisely the use case that the React team had in\\nmind when they added the \",\"$L33\",\"\\nwarning!\"]}],[\"$\",\"p\",null,{\"children\":[\"To me at least, this is a reminder of why it’s important to understand\\n\",[\"$\",\"em\",null,{\"children\":\"why\"}],\" our code does what it does. It can be tempting to sit\\nback and let sleeping dogs lie after finally finding the solution to a\\nconfounding bug. But it’s all too easy for those incomplete\\nunderstandings to build up and slowly shift our intuition over time,\\nuntil we find that our mental model of our problem space doesn’t match\\nreality any longer.\"]}],[\"$\",\"p\",null,{\"children\":\"Oh, and React ProseMirror doesn’t trigger the layout effect warning\\nduring server-side rendering anymore!\"}]],\"serverOnly\":\"$undefined\"}]]}]]]}]\n"])</script><script>self.__next_f.push([1,"9:null\n"])</script><script>self.__next_f.push([1,"16:[\"$\",\"div\",null,{\"data-bright-theme\":\"dracula\",\"data-bright-mode\":\"$undefined\",\"className\":\"text-sm md:text-base\",\"style\":{\"color\":\"#F8F8F2\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#44475A\",\"--line-number-color\":\"#6272A4\",\"--tab-border\":\"#191A21\",\"--tab-background\":\"#282A36\",\"--tab-color\":\"#F8F8F2\",\"--inactive-tab-background\":\"#21222C\",\"--inactive-tab-color\":\"#6272A4\",\"--tab-top-border\":\"#FF79C680\",\"--tab-bottom-border\":\"#282A36\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  \\n  \"}}],\"\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#F8F8F2\",\"background\":\"#282A36\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{},\"children\":\"Warning: useLayoutEffect does nothing on the server, because its effect\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{},\"children\":\"cannot be encoded into the server renderer's output format. This will\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{},\"children\":\"lead to a mismatch between the initial, non-hydrated UI and the intended\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{},\"children\":\"UI. To avoid this, useLayoutEffect should only be used in components\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{},\"children\":\"that render exclusively on the client. See\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{},\"children\":\"https://reactjs.org/link/uselayouteffect-ssr for common fixes.\"}]],[\"$\",\"br\",null,{}]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"b:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"There’s no such thing as an isomorphic layout effect\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"There’s something off about the most popular approach to quieting React’s warnings about using layout effects during server-side rendering. Let’s break down why the warning exists, and when it really makes sense to disable it without actually addressing it.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"canonical\",\"href\":\"https://smoores.dev/post/no_such_thing_isomorphic_layout_effect/\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"There’s no such thing as an isomorphic layout effect\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"There’s something off about the most popular approach to quieting React’s warnings about using layout effects during server-side rendering. Let’s break down why the warning exists, and when it really makes sense to disable it without actually addressing it.\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:url\",\"content\":\"https://handlewithcare.dev/\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:title\",\"content\":\"There’s no such thing as an isomorphic layout effect\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:description\",\"content\":\"There’s something off about the most popular approach to quieting React’s warnings about using layout effects during server-side rendering. Let’s break down why the warning exists, and when it really makes sense to disable it without actually addressing it.\"}],[\"$\",\"link\",\"11\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]],\"error\":null,\"digest\":\"$undefined\"}\n13:{\"metadata\":\"$b:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"19:[\"$\",\"div\",null,{\"data-bright-theme\":\"dracula\",\"data-bright-mode\":\"$undefined\",\"className\":\"text-sm md:text-base\",\"style\":{\"color\":\"#F8F8F2\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#44475A\",\"--line-number-color\":\"#6272A4\",\"--tab-border\":\"#191A21\",\"--tab-background\":\"#282A36\",\"--tab-color\":\"#F8F8F2\",\"--inactive-tab-background\":\"#21222C\",\"--inactive-tab-color\":\"#6272A4\",\"--tab-top-border\":\"#FF79C680\",\"--tab-bottom-border\":\"#282A36\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  \\n  \"}}],[\"$\",\"div\",null,{\"className\":\"$undefined\",\"style\":{\"background\":\"#191A21\",\"color\":\"#F8F8F2\",\"position\":\"relative\",\"display\":\"flex\"},\"children\":[[\"$\",\"div\",null,{\"data-bright-tab\":\"App.tsx\",\"style\":{\"cursor\":\"pointer\",\"background\":\"var(--tab-background)\",\"color\":\"var(--tab-color)\",\"display\":\"inline-block\",\"padding\":\"0.5em 1em\",\"position\":\"relative\",\"fontFamily\":\"Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif\",\"fontSize\":\"13px\",\"borderRight\":\"1px solid var(--tab-border)\"},\"children\":[\"App.tsx\",[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"left\":0,\"top\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-top-border)\",\"width\":\"100%\"}}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-bottom-border)\",\"width\":\"100%\"}}]]}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"width\":\"100%\",\"pointerEvents\":\"none\",\"background\":\"#191A21\",\"height\":1,\"zIndex\":9}}]]}],[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#F8F8F2\",\"background\":\"#282A36\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" { useLayoutEffect } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"react\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"export function \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"App\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"() {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"  const\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" [tooltipTop, setTooltipTop] \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"useState\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"(\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#BD93F9\"},\"children\":\"0\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"  const\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" [tooltipLeft, setTooltipLeft] \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"useState\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"(\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#BD93F9\"},\"children\":\"0\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"  const\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" anchorRef \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"useRef\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003c\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FFB86C\",\"fontStyle\":\"italic\"},\"children\":\"HTMLDivElement \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"| \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#8BE9FD\",\"fontStyle\":\"italic\"},\"children\":\"null\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e(\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#BD93F9\"},\"children\":\"null\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"  useLayoutEffect\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"(() \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"    if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"!\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"anchorRef.current) \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"return\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"    const\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" rect \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" anchorRef.current.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"getBoundingClientRect\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"    setTooltipTop\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"(rect.top);\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"    setTooltipLeft\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"(rect.left);\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"  }, []);\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"  return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" (\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"    \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"article\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"      \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"h1\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003ePositioned Tooltip Demo\u003c/\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"h1\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"      \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#50FA7B\",\"fontStyle\":\"italic\"},\"children\":\"ref\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"{anchorRef} /\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"      \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"p\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003eA tooltip should be positioned above this paragraph.\u003c/\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"p\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"      \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#50FA7B\",\"fontStyle\":\"italic\"},\"children\":\"style\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"{{ position\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\": \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"absolute\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\", top, left }}\u003eThis is the tooltip\u003c/\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"    \u003c/\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"article\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"  );\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"21:[\"$\",\"div\",null,{\"data-bright-theme\":\"dracula\",\"data-bright-mode\":\"$undefined\",\"className\":\"text-sm md:text-base\",\"style\":{\"color\":\"#F8F8F2\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#44475A\",\"--line-number-color\":\"#6272A4\",\"--tab-border\":\"#191A21\",\"--tab-background\":\"#282A36\",\"--tab-color\":\"#F8F8F2\",\"--inactive-tab-background\":\"#21222C\",\"--inactive-tab-color\":\"#6272A4\",\"--tab-top-border\":\"#FF79C680\",\"--tab-bottom-border\":\"#282A36\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  \\n  \"}}],[\"$\",\"div\",null,{\"className\":\"$undefined\",\"style\":{\"background\":\"#191A21\",\"color\":\"#F8F8F2\",\"position\":\"relative\",\"display\":\"flex\"},\"children\":[[\"$\",\"div\",null,{\"data-bright-tab\":\"use-isomorphic-layout-effect/src/index.ts\",\"style\":{\"cursor\":\"pointer\",\"background\":\"var(--tab-background)\",\"color\":\"var(--tab-color)\",\"display\":\"inline-block\",\"padding\":\"0.5em 1em\",\"position\":\"relative\",\"fontFamily\":\"Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif\",\"fontSize\":\"13px\",\"borderRight\":\"1px solid var(--tab-border)\"},\"children\":[\"use-isomorphic-layout-effect/src/index.ts\",[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"left\":0,\"top\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-top-border)\",\"width\":\"100%\"}}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-bottom-border)\",\"width\":\"100%\"}}]]}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"width\":\"100%\",\"pointerEvents\":\"none\",\"background\":\"#191A21\",\"height\":1,\"zIndex\":9}}]]}],[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#F8F8F2\",\"background\":\"#282A36\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" { useEffect, useLayoutEffect } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"react\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" isClient \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"#is-client\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"export default\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" isClient \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"?\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useLayoutEffect \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\":\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useEffect;\"}]],[\"$\",\"br\",null,{}]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"24:[\"$\",\"div\",null,{\"data-bright-theme\":\"dracula\",\"data-bright-mode\":\"$undefined\",\"className\":\"text-sm md:text-base\",\"style\":{\"color\":\"#F8F8F2\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#44475A\",\"--line-number-color\":\"#6272A4\",\"--tab-border\":\"#191A21\",\"--tab-background\":\"#282A36\",\"--tab-color\":\"#F8F8F2\",\"--inactive-tab-background\":\"#21222C\",\"--inactive-tab-color\":\"#6272A4\",\"--tab-top-border\":\"#FF79C680\",\"--tab-bottom-border\":\"#282A36\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  \\n  \"}}],[\"$\",\"div\",null,{\"className\":\"$undefined\",\"style\":{\"background\":\"#191A21\",\"color\":\"#F8F8F2\",\"position\":\"relative\",\"display\":\"flex\"},\"children\":[[\"$\",\"div\",null,{\"data-bright-tab\":\"react-use\",\"style\":{\"cursor\":\"pointer\",\"background\":\"var(--tab-background)\",\"color\":\"var(--tab-color)\",\"display\":\"inline-block\",\"padding\":\"0.5em 1em\",\"position\":\"relative\",\"fontFamily\":\"Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif\",\"fontSize\":\"13px\",\"borderRight\":\"1px solid var(--tab-border)\"},\"children\":[\"react-use\",[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"left\":0,\"top\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-top-border)\",\"width\":\"100%\"}}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-bottom-border)\",\"width\":\"100%\"}}]]}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"width\":\"100%\",\"pointerEvents\":\"none\",\"background\":\"#191A21\",\"height\":1,\"zIndex\":9}}]]}],[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#F8F8F2\",\"background\":\"#282A36\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"const\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useIsomorphicLayoutEffect \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" isBrowser \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"?\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useLayoutEffect \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\":\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useEffect;\"}]],[\"$\",\"br\",null,{}]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"25:[\"$\",\"div\",null,{\"data-bright-theme\":\"dracula\",\"data-bright-mode\":\"$undefined\",\"className\":\"text-sm md:text-base\",\"style\":{\"color\":\"#F8F8F2\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#44475A\",\"--line-number-color\":\"#6272A4\",\"--tab-border\":\"#191A21\",\"--tab-background\":\"#282A36\",\"--tab-color\":\"#F8F8F2\",\"--inactive-tab-background\":\"#21222C\",\"--inactive-tab-color\":\"#6272A4\",\"--tab-top-border\":\"#FF79C680\",\"--tab-bottom-border\":\"#282A36\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  \\n  \"}}],[\"$\",\"div\",null,{\"className\":\"$undefined\",\"style\":{\"background\":\"#191A21\",\"color\":\"#F8F8F2\",\"position\":\"relative\",\"display\":\"flex\"},\"children\":[[\"$\",\"div\",null,{\"data-bright-tab\":\"mantine\",\"style\":{\"cursor\":\"pointer\",\"background\":\"var(--tab-background)\",\"color\":\"var(--tab-color)\",\"display\":\"inline-block\",\"padding\":\"0.5em 1em\",\"position\":\"relative\",\"fontFamily\":\"Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif\",\"fontSize\":\"13px\",\"borderRight\":\"1px solid var(--tab-border)\"},\"children\":[\"mantine\",[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"left\":0,\"top\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-top-border)\",\"width\":\"100%\"}}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-bottom-border)\",\"width\":\"100%\"}}]]}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"width\":\"100%\",\"pointerEvents\":\"none\",\"background\":\"#191A21\",\"height\":1,\"zIndex\":9}}]]}],[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#F8F8F2\",\"background\":\"#282A36\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"export const\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useIsomorphicEffect \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"  typeof\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" document \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"!== \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"undefined\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\" \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"?\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useLayoutEffect \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\":\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useEffect;\"}]],[\"$\",\"br\",null,{}]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"26:[\"$\",\"div\",null,{\"data-bright-theme\":\"dracula\",\"data-bright-mode\":\"$undefined\",\"className\":\"text-sm md:text-base\",\"style\":{\"color\":\"#F8F8F2\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#44475A\",\"--line-number-color\":\"#6272A4\",\"--tab-border\":\"#191A21\",\"--tab-background\":\"#282A36\",\"--tab-color\":\"#F8F8F2\",\"--inactive-tab-background\":\"#21222C\",\"--inactive-tab-color\":\"#6272A4\",\"--tab-top-border\":\"#FF79C680\",\"--tab-bottom-border\":\"#282A36\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  \\n  \"}}],[\"$\",\"div\",null,{\"className\":\"$undefined\",\"style\":{\"background\":\"#191A21\",\"color\":\"#F8F8F2\",\"position\":\"relative\",\"display\":\"flex\"},\"children\":[[\"$\",\"div\",null,{\"data-bright-tab\":\"react-beautiful-dnd\",\"style\":{\"cursor\":\"pointer\",\"background\":\"var(--tab-background)\",\"color\":\"var(--tab-color)\",\"display\":\"inline-block\",\"padding\":\"0.5em 1em\",\"position\":\"relative\",\"fontFamily\":\"Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif\",\"fontSize\":\"13px\",\"borderRight\":\"1px solid var(--tab-border)\"},\"children\":[\"react-beautiful-dnd\",[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"left\":0,\"top\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-top-border)\",\"width\":\"100%\"}}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-bottom-border)\",\"width\":\"100%\"}}]]}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"width\":\"100%\",\"pointerEvents\":\"none\",\"background\":\"#191A21\",\"height\":1,\"zIndex\":9}}]]}],[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#F8F8F2\",\"background\":\"#282A36\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"const\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useIsomorphicLayoutEffect \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"  typeof\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" window \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"!== \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"undefined\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\" \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"\u0026\u0026\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"  typeof\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" window.document \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"!== \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"undefined\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\" \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"\u0026\u0026\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"  typeof\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" window.document.createElement \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"!== \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"undefined\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"    ?\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useLayoutEffect\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"    :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useEffect;\"}]],[\"$\",\"br\",null,{}]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"27:[\"$\",\"div\",null,{\"data-bright-theme\":\"dracula\",\"data-bright-mode\":\"$undefined\",\"className\":\"text-sm md:text-base\",\"style\":{\"color\":\"#F8F8F2\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#44475A\",\"--line-number-color\":\"#6272A4\",\"--tab-border\":\"#191A21\",\"--tab-background\":\"#282A36\",\"--tab-color\":\"#F8F8F2\",\"--inactive-tab-background\":\"#21222C\",\"--inactive-tab-color\":\"#6272A4\",\"--tab-top-border\":\"#FF79C680\",\"--tab-bottom-border\":\"#282A36\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  \\n  \"}}],[\"$\",\"div\",null,{\"className\":\"$undefined\",\"style\":{\"background\":\"#191A21\",\"color\":\"#F8F8F2\",\"position\":\"relative\",\"display\":\"flex\"},\"children\":[[\"$\",\"div\",null,{\"data-bright-tab\":\"useClientLayoutEffect.ts\\\"\",\"style\":{\"cursor\":\"pointer\",\"background\":\"var(--tab-background)\",\"color\":\"var(--tab-color)\",\"display\":\"inline-block\",\"padding\":\"0.5em 1em\",\"position\":\"relative\",\"fontFamily\":\"Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif\",\"fontSize\":\"13px\",\"borderRight\":\"1px solid var(--tab-border)\"},\"children\":[\"useClientLayoutEffect.ts\\\"\",[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"left\":0,\"top\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-top-border)\",\"width\":\"100%\"}}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-bottom-border)\",\"width\":\"100%\"}}]]}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"width\":\"100%\",\"pointerEvents\":\"none\",\"background\":\"#191A21\",\"height\":1,\"zIndex\":9}}]]}],[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#F8F8F2\",\"background\":\"#282A36\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" { useLayoutEffect } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"react\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"export function \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"useClientLayoutEffect\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"  ...\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFB86C\",\"fontStyle\":\"italic\"},\"children\":\"args\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\": \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8BE9FD\",\"fontStyle\":\"italic\"},\"children\":\"Parameters\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003c\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"typeof\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useLayoutEffect\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\") {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"  if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"typeof\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" document \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=== \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"undefined\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\") \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"return\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"  useLayoutEffect\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"(\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"...\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"args);\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"2a:[\"$\",\"div\",null,{\"data-bright-theme\":\"dracula\",\"data-bright-mode\":\"$undefined\",\"className\":\"text-sm md:text-base\",\"style\":{\"color\":\"#F8F8F2\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#44475A\",\"--line-number-color\":\"#6272A4\",\"--tab-border\":\"#191A21\",\"--tab-background\":\"#282A36\",\"--tab-color\":\"#F8F8F2\",\"--inactive-tab-background\":\"#21222C\",\"--inactive-tab-color\":\"#6272A4\",\"--tab-top-border\":\"#FF79C680\",\"--tab-bottom-border\":\"#282A36\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  \\n  \"}}],[\"$\",\"div\",null,{\"className\":\"$undefined\",\"style\":{\"background\":\"#191A21\",\"color\":\"#F8F8F2\",\"position\":\"relative\",\"display\":\"flex\"},\"children\":[[\"$\",\"div\",null,{\"data-bright-tab\":\"connectAdvanced.js\\\"\",\"style\":{\"cursor\":\"pointer\",\"background\":\"var(--tab-background)\",\"color\":\"var(--tab-color)\",\"display\":\"inline-block\",\"padding\":\"0.5em 1em\",\"position\":\"relative\",\"fontFamily\":\"Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif\",\"fontSize\":\"13px\",\"borderRight\":\"1px solid var(--tab-border)\"},\"children\":[\"connectAdvanced.js\\\"\",[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"left\":0,\"top\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-top-border)\",\"width\":\"100%\"}}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-bottom-border)\",\"width\":\"100%\"}}]]}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"width\":\"100%\",\"pointerEvents\":\"none\",\"background\":\"#191A21\",\"height\":1,\"zIndex\":9}}]]}],[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#F8F8F2\",\"background\":\"#282A36\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6272A4\"},\"children\":\"// React currently throws a warning when using useLayoutEffect on the server.\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6272A4\"},\"children\":\"// To get around it, we can conditionally useEffect on the server (no-op) and\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6272A4\"},\"children\":\"// useLayoutEffect in the browser. We need useLayoutEffect because we want\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6272A4\"},\"children\":\"// \\\\`connect\\\\`_ to perform sync updates to a ref to save the latest props after\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6272A4\"},\"children\":\"// a render is actually committed to the DOM.\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"const\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useIsomorphicLayoutEffect \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"typeof\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" window \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"!== \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"'\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"undefined\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"' \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"?\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useLayoutEffect \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\":\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" useEffect\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"...\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6272A4\"},\"children\":\"// We need this to execute synchronously every time we re-render. However, React warns\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6272A4\"},\"children\":\"// about useLayoutEffect in SSR, so we try to detect environment and fall back to\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6272A4\"},\"children\":\"// just useEffect instead to avoid the warning, since neither will run anyway.\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#50FA7B\"},\"children\":\"useIsomorphicLayoutEffect\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"(() \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"1a:[\"$\",\"div\",null,{\"data-bright-theme\":\"dracula\",\"data-bright-mode\":\"$undefined\",\"className\":\"text-sm md:text-base\",\"style\":{\"color\":\"#F8F8F2\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#44475A\",\"--line-number-color\":\"#6272A4\",\"--tab-border\":\"#191A21\",\"--tab-background\":\"#282A36\",\"--tab-color\":\"#F8F8F2\",\"--inactive-tab-background\":\"#21222C\",\"--inactive-tab-color\":\"#6272A4\",\"--tab-top-border\":\"#FF79C680\",\"--tab-bottom-border\":\"#282A36\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  \\n  \"}}],[\"$\",\"div\",null,{\"className\":\"$undefined\",\"style\":{\"background\":\"#191A21\",\"color\":\"#F8F8F2\",\"position\":\"relative\",\"display\":\"flex\"},\"children\":[[\"$\",\"div\",null,{\"data-bright-tab\":\"client.html\",\"style\":{\"cursor\":\"pointer\",\"background\":\"var(--tab-background)\",\"color\":\"var(--tab-color)\",\"display\":\"inline-block\",\"padding\":\"0.5em 1em\",\"position\":\"relative\",\"fontFamily\":\"Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif\",\"fontSize\":\"13px\",\"borderRight\":\"1px solid var(--tab-border)\"},\"children\":[\"client.html\",[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"left\":0,\"top\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-top-border)\",\"width\":\"100%\"}}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-bottom-border)\",\"width\":\"100%\"}}]]}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"width\":\"100%\",\"pointerEvents\":\"none\",\"background\":\"#191A21\",\"height\":1,\"zIndex\":9}}]]}],[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#F8F8F2\",\"background\":\"#282A36\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"article\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"  \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"h1\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003ePositioned Tooltip Demo\u003c/\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"h1\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"  \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\u003c/\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"  \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"p\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003eA tooltip should be positioned above this paragraph.\u003c/\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"p\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"  \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#50FA7B\",\"fontStyle\":\"italic\"},\"children\":\"style\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"position: absolute; top: 50px; left: 8px;\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\u003c/\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003c/\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"article\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"1b:[\"$\",\"div\",null,{\"data-bright-theme\":\"dracula\",\"data-bright-mode\":\"$undefined\",\"className\":\"text-sm md:text-base\",\"style\":{\"color\":\"#F8F8F2\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#44475A\",\"--line-number-color\":\"#6272A4\",\"--tab-border\":\"#191A21\",\"--tab-background\":\"#282A36\",\"--tab-color\":\"#F8F8F2\",\"--inactive-tab-background\":\"#21222C\",\"--inactive-tab-color\":\"#6272A4\",\"--tab-top-border\":\"#FF79C680\",\"--tab-bottom-border\":\"#282A36\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  \\n  \"}}],[\"$\",\"div\",null,{\"className\":\"$undefined\",\"style\":{\"background\":\"#191A21\",\"color\":\"#F8F8F2\",\"position\":\"relative\",\"display\":\"flex\"},\"children\":[[\"$\",\"div\",null,{\"data-bright-tab\":\"server.html\",\"style\":{\"cursor\":\"pointer\",\"background\":\"var(--tab-background)\",\"color\":\"var(--tab-color)\",\"display\":\"inline-block\",\"padding\":\"0.5em 1em\",\"position\":\"relative\",\"fontFamily\":\"Segoe WPC,Segoe UI,-apple-system,BlinkMacSystemFont,sans-serif\",\"fontSize\":\"13px\",\"borderRight\":\"1px solid var(--tab-border)\"},\"children\":[\"server.html\",[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"left\":0,\"top\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-top-border)\",\"width\":\"100%\"}}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"height\":1,\"zIndex\":10,\"background\":\"var(--tab-bottom-border)\",\"width\":\"100%\"}}]]}],[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"bottom\":0,\"left\":0,\"width\":\"100%\",\"pointerEvents\":\"none\",\"background\":\"#191A21\",\"height\":1,\"zIndex\":9}}]]}],[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#F8F8F2\",\"background\":\"#282A36\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"article\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"  \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"h1\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003ePositioned Tooltip Demo\u003c/\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"h1\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"  \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\u003c/\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"  \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"p\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003eA tooltip should be positioned above this paragraph.\u003c/\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"p\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6272A4\"},\"children\":\"  \u003c!-- focus(1:1) --\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"  \u003c\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#50FA7B\",\"fontStyle\":\"italic\"},\"children\":\"style\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"=\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#F1FA8C\"},\"children\":\"position: absolute; top: 0; left: 0;\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#E9F284\"},\"children\":\"\\\"\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\u003c/\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"div\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[false,[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003c/\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF79C6\"},\"children\":\"article\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#F8F8F2\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"14:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n15:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n17:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n18:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n1c:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"0\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}],\" \",[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"0\"}]]}]\n1d:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n1e:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useEffect\"}]]}]\n1f:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n20:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n22:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n23:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useEffect\"}]]}]\n28:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n29:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useEffect\"}]]}]\n2b:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useEffect\"}]]}]\n2c:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useEffect\"}]]}]\n2d:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useIsomorphicLayoutEffect\"}]]}]\n2e:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n2f:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{"])</script><script>self.__next_f.push([1,"\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n30:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n31:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n32:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useEffect\"}]]}]\n33:[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"useLayoutEffect\"}]]}]\n"])</script></body></html>